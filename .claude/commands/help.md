# 🎓 TDD 커스텀 명령어 사용 설명서

Kent Beck의 TDD와 Tidy First 원칙을 따르는 자동화된 개발 프로세스입니다.

---

## 📚 전체 명령어 목록

### 핵심 사이클 (Red → Green → Refactor)

| 명령어 | 목적 | 단계 | 설명 |
|--------|------|------|------|
| `/go` | 다음 테스트 시작 | RED 🔴 | plan.md에서 다음 미표시 테스트 찾기 & 실패 테스트 작성 |
| `/red` | RED 단계 상세 | RED 🔴 | 현재 작업 중인 테스트의 RED 단계 상세 진행 |
| `/green` | 테스트 통과 | GREEN 🟢 | 최소 코드로 테스트를 통과시키기 |
| `/refactor` | 코드 정리 | ♻️ | 테스트 통과 후 코드 구조 개선 |
| `/commit` | 변경 커밋 | ✅ | 모든 테스트 통과 후 git 커밋 |

### 정보 & 상태

| 명령어 | 목적 | 설명 |
|--------|------|------|
| `/status` | 진행 상황 | 현재 진행률, 다음 테스트, 최근 커밋 표시 |
| `/help` | 도움말 | 모든 명령어 설명 (현재 화면) |

---

## 🚀 빠른 시작

### 1️⃣ 첫 번째 테스트 시작
```bash
/go
```
→ plan.md에서 다음 미표시 테스트 찾아서 RED 단계 시작

### 2️⃣ 테스트 통과
```bash
/green
```
→ 최소 코드로 테스트를 통과시킴

### 3️⃣ 코드 정리 (필요 시)
```bash
/refactor
```
→ 코드 구조 개선 (중복 제거, 이름 개선 등)

### 4️⃣ 변경사항 커밋
```bash
/commit
```
→ git에 변경사항 커밋

### 5️⃣ 다음 테스트
```bash
/go
```
→ 반복...

---

## 📖 각 명령어 상세 설명

### `/go` - 다음 테스트 시작
**언제 사용**: 새로운 테스트를 시작하고 싶을 때

```bash
/go
```

**하는 일**:
1. plan.md에서 `[ ]`로 표시된 첫 번째 테스트 찾기
2. 실패하는 테스트 코드 작성
3. 테스트 실행하여 실패 확인
4. 테스트 코드 표시

**다음 단계**: `/green` → 테스트 통과

---

### `/red` - RED 단계 상세 진행
**언제 사용**: RED 단계를 더 자세하게 진행하고 싶을 때

```bash
/red
```

**하는 일**:
1. 현재 테스트 파일 위치 확인
2. 실패하는 테스트 작성
3. NUnit 또는 Unity Test Framework로 실행
4. 실패 메시지 명확하게 표시

**규칙**:
- ✅ 테스트는 반드시 실패해야 함
- ✅ 프로덕션 코드는 수정하면 안 됨
- ✅ 테스트 코드만 작성

---

### `/green` - 테스트 통과
**언제 사용**: 실패하는 테스트를 통과시키고 싶을 때

```bash
/green
```

**하는 일**:
1. 테스트를 통과시키는 최소 코드 작성
2. 모든 테스트 실행하여 검증
3. 통과한 테스트 목록 표시

**규칙**:
- ✅ 테스트는 통과해야 함
- ✅ 가장 간단한 구현만 함 (하드코딩도 괜찮음)
- ✅ 중복은 무시 (Refactor 단계에서 처리)
- ✅ 리팩토링하지 말 것

**팁**: "Make it work, then make it right"

---

### `/refactor` - 코드 정리
**언제 사용**: 테스트가 통과한 후 코드 구조를 개선하고 싶을 때

```bash
/refactor
```

**하는 일**:
1. 개선할 점 분석 (중복, 명확성 등)
2. 한 번에 하나의 리팩토링만 수행
3. 각 단계 후 테스트 실행
4. 완료 후 커밋 준비

**리팩토링 우선순위**:
1. 중복 제거 (DRY)
2. 의도 표현 (명확한 이름)
3. 메서드 추출
4. 변수명 개선

**규칙**:
- ✅ 테스트는 계속 통과해야 함
- ✅ 한 번에 하나의 변경만
- ✅ 각 단계 후 테스트 실행
- ✅ 행동을 변경하면 안 됨 (구조만)

---

### `/commit` - 변경사항 커밋
**언제 사용**: 테스트가 모두 통과한 후 git에 저장하고 싶을 때

```bash
/commit
```

**하는 일**:
1. 모든 테스트 통과 확인
2. 커밋 유형 결정 (구조적/행동적)
3. 명확한 커밋 메시지 생성
4. git에 커밋

**커밋 유형**:

#### STRUCTURAL (구조적 변경)
행동은 변경하지 않고 코드 구조만 개선
- 메서드 추출
- 변수명 변경
- 코드 이동

```
[STRUCTURAL] 메서드 추출: ValidateGameObject()
```

#### BEHAVIORAL (행동적 변경)
새로운 기능 추가 또는 버그 수정
- 새 기능
- 버그 수정
- 로직 변경

```
[BEHAVIORAL] GameObject 파괴 후 접근 방지 구현
```

**규칙**:
- ✅ 모든 테스트 통과해야 함
- ✅ 구조적 변경과 행동적 변경을 섞지 말 것
- ✅ 구조적 변경을 먼저 커밋
- ✅ 작고 자주 커밋 (큰 커밋보다)

---

### `/status` - 진행 상황 확인
**언제 사용**: 현재 진행 상황을 파악하고 싶을 때

```bash
/status
```

**표시 내용**:
- Git 상태 (현재 브랜치, 미커밋 변경사항)
- 진행률 (P0/P1/P2별 완료율)
- 현재 작업 테스트
- 다음 예정 테스트
- 최근 커밋 정보
- 테스트 실행 결과

**예시**:
```
📊 PoolService 개선 진행 상황

P0 (Critical):    1/2 ██░ 50%
P1 (Important):   0/3 ░░░ 0%
P2 (Enhancement): 0/5 ░░░ 0%
────────────────────────────
전체:              1/10 ██░░░ 10%
```

---

## 🔄 전체 작업 흐름

```
┌─────────────────────────────────────────────────────────┐
│                   시작: /status                         │
│              (진행 상황 확인)                            │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────▼──────────────────────────────────┐
│                    /go                                   │
│         (다음 테스트 시작 - RED 단계)                     │
│  - plan.md 파싱                                         │
│  - 실패 테스트 작성                                     │
│  - 테스트 실행 (❌ 실패 확인)                            │
└──────────────────────┬──────────────────────────────────┘
                       │
┌──────────────────────▼──────────────────────────────────┐
│                   /green                                │
│         (테스트 통과 - GREEN 단계)                       │
│  - 최소 코드 구현                                       │
│  - 모든 테스트 실행 (✅ 통과 확인)                       │
└──────────────────────┬──────────────────────────────────┘
                       │
                       ├─ 리팩토링 필요?
                       │  Yes → /refactor ─┐
                       │                   │
                       │                   ▼
                       │         ┌──────────────────┐
                       │         │ /refactor        │
                       │         │ (REFACTOR 단계)  │
                       │         │ - 중복 제거      │
                       │         │ - 이름 개선      │
                       │         │ - 메서드 추출    │
                       │         └────────┬─────────┘
                       │                  │
                       │◄─────────────────┘
                       │
┌──────────────────────▼──────────────────────────────────┐
│                  /commit                                │
│         (변경사항 커밋)                                  │
│  - 커밋 유형 결정                                       │
│  - 커밋 메시지 작성                                     │
│  - git 커밋                                             │
└──────────────────────┬──────────────────────────────────┘
                       │
            모든 테스트 완료?
                   │
        No ────────┴─────────► /status ──────┐
                   │                         │
                  Yes                       /go 반복
                   │
                   ▼
            ✅ 완료!
```

---

## 💡 팁과 트릭

### Red 단계
- 실패하는 이유가 명확해야 함
- 한 번에 하나의 개념만 테스트
- 테스트 이름은 행동을 설명하도록 작성

### Green 단계
- 가장 간단한 방법 선택 (하드코딩도 OK)
- 모든 경우를 처리할 필요 없음
- 단순함이 목표

### Refactor 단계
- 테스트가 계속 통과하는지 확인하며 진행
- 작은 단위의 변경 (한 번에 하나)
- 변경 전후를 비교하며 진행

### 커밋
- 작고 자주 (큰 커밋보다 작은 커밋)
- 구조적 + 행동적 변경을 섞지 말 것
- 명확한 메시지 작성

---

## 📝 필수 기억사항

1. **Red 단계**: 테스트는 반드시 실패해야 함
2. **Green 단계**: 가장 간단하게 구현 (리팩토링 금지)
3. **Refactor 단계**: 한 번에 하나의 변경만 (테스트 후)
4. **Commit**: 구조적/행동적 변경 분리
5. **반복**: Red → Green → Refactor → Commit → 다음 테스트

---

## 🔗 관련 문서

- `plan.md`: 전체 개선 계획
- `CLAUDE.md`: 개발 원칙 및 규칙
- `.claude/commands/`: 모든 커스텀 명령어

---

**Remember**: "Make it work, make it right, make it fast" - Kent Beck
